<div align="center">
  <h1>wpress-extract</h1>
  <p>
    A simple CLI tool to unpack <code>.wpress</code> files generated by the <a href="https://wordpress.org/plugins/all-in-one-wp-migration/" target="_blank" rel="noopener">All-in-One WP Migration</a> Wordpress plugin.
  </p>
  <hr />
  <p>
    <img src="https://imgs.xkcd.com/comics/standards.png" alt="A funny comic from xkcd.com about creating new standards in computer industry" />
    <br />
    <sub>"Standards" by <a href="https://xkcd.com/927/">xkcd</a>.</sub>
  </p>
</div>

## Usage

### Build from Source
```sh
git clone https://github.com/jarjee/wpress-extract
cd wpress-extract
make build
```

### Extract Archives
```sh
# Extract a wpress file
./bin/wpress-extract -input your-migration.wpress

# Specify custom output directory
./bin/wpress-extract -input your-migration.wpress -out ./output-dir

# Force overwrite existing directory
./bin/wpress-extract -input your-migration.wpress -force
```
The command creates a new directory with the same name (e.g. `your-migration/`) where it extracts the archive contents.

### Compress Archives
```sh
# Compress a folder to a wpress file
./bin/wpress-extract -mode compress -input your-migration/

# Specify custom output file
./bin/wpress-extract -mode compress -input your-migration/ -out my-migration.wpress

# Force overwrite existing wpress file
./bin/wpress-extract -mode compress -input your-migration/ -out my-migration.wpress -force
```

### Options

| Option               | Description                                                                           |
| -------------------- | ------------------------------------------------------------------------------------- |
| `-input <file>`      | Path to the input .wpress file (required, can also be provided as positional argument)|
| `-out <dir>`         | Define an alternate directory where the archive should be extracted to.               |
| `-force`             | Skip the check if the output directory exists and override the content in it.         |
| `-mode <mode>`       | Operation mode: `extract` (default) or `compress`                                     |
| `-help`              | Show help message                                                                     |

* Note: Users can also drag-and-drop files onto the executable instead of using `-input`

## Acknowledgements

The functionality of this package is inspired by the [Wpress-Extractor](https://github.com/fifthsegment/Wpress-Extractor) tool, and is a golang reimplementation of [ofhouse/wpress-extract](https://github.com/ofhouse/wpress-extract).
This fork contains modifications assisted by [aider](https://aider.chat), an LLM-powered coding assistant - if you're wondering about the inconsistent quality of code; most of the code in this repo was generated via aider as a trail-run.

## License

MIT - see [LICENSE](./LICENSE) for details.
